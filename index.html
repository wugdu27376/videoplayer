<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>视频播放器</title>
    <link rel="icon" href="https://wugdu27376.github.io/videoplayer/favicon.ico">
    <script>
    (function() {
        var links = [
            'https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.css',
            'https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.css',
            'https://raw.githubusercontent.com/nbs-it/Font-Awesome-v4.7.0/refs/heads/master/css/font-awesome.css',
            'https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.css',
            'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css',
            'https://unpkg.com/font-awesome@4.7.0/css/font-awesome.css'
        ];
        
        var currentIndex = 0;
        
        function loadCSS(url) {
            var link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = url;
            
            // 兼容低版本浏览器的 onerror 事件
            link.onerror = function() {
                // 移除加载失败的链接
                if (link.parentNode) {
                    link.parentNode.removeChild(link);
                }
                
                // 尝试下一个备用链接
                currentIndex++;
                if (currentIndex < links.length) {
                    loadCSS(links[currentIndex]);
                }
            };
            
            // 使用 onload 来确认链接加载成功
            link.onload = function() {
                // 成功加载，不做任何操作
            };
            
            document.head.appendChild(link);
        }
        
        // 开始加载第一个链接
        if (links.length > 0) {
            loadCSS(links[0]);
        }
    })();
    </script>
</head>
</head>
<body>
<style>
.flexbox-webkit {
    display: flex;
    display: -webkit-box;      /* OLD: iOS 6-, Safari 3.1-6 */
    display: -moz-box;         /* OLD: Firefox 19- */
    display: -ms-flexbox;      /* TWEENER: IE 10 */
    display: -webkit-flex;     /* NEW: Chrome 21-28, Safari 8- */
    
    -webkit-box-direction: normal;      /* OLD */
    -webkit-box-orient: horizontal;     /* OLD */
    -moz-box-direction: normal;         /* OLD */
    -moz-box-orient: horizontal;        /* OLD */
    -webkit-flex-direction: row;        /* NEW, Chrome 21-28 */
    -ms-flex-direction: row;            /* IE 10 */
    flex-direction: row;                /* NEW, Spec */
    
    -webkit-box-pack: left;           /* OLD */
    -moz-box-pack: left;              /* OLD */
    -ms-flex-pack: left;              /* IE 10 */
    -webkit-justify-content: left;    /* Chrome 21-28 */
    justify-content: left;            /* NEW, Spec */
    
    -webkit-box-align: left;          /* OLD */
    -moz-box-align: left;             /* OLD */
    -ms-flex-align: left;             /* IE 10 */
    -webkit-align-items: left;        /* Chrome 21-28 */
    align-items: left;                /* NEW, Spec */
    
    -webkit-align-content: stretch;     /* Chrome 21-28 */
    -ms-flex-line-pack: stretch;        /* IE 10 */
    align-content: stretch;             /* NEW, Spec */
}

.flexbox-webkit-left {
    -webkit-box-pack: left;           /* OLD */
    -moz-box-pack: left;              /* OLD */
    -ms-flex-pack: left;              /* IE 10 */
    -webkit-justify-content: left;    /* Chrome 21-28 */
    justify-content: left;            /* NEW, Spec */
}

.flexbox-webkit-center {
    -webkit-box-pack: center;           /* OLD */
    -moz-box-pack: center;              /* OLD */
    -ms-flex-pack: center;              /* IE 10 */
    -webkit-justify-content: center;    /* Chrome 21-28 */
    justify-content: center;            /* NEW, Spec */
}

button.player-submit-btn-pointer {
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
}

button.player-submit-btn-pointer:disabled {
    cursor: text;
}
</style>
<!-- 第一行：输入框和播放按钮 -->
<div style="width: 95%;" class="flexbox-webkit flexbox-webkit-left">
    <input type="text" id="videoUrl" placeholder="请输入视频下载链接" style="width: 100%; min-width: 10%; max-width: 800px;" onkeypress="handleKeyPress(event)">
    <button id="downloadVideoBtn" class="player-submit-btn-pointer" style="display: none; white-space: nowrap;" onclick="downloadVideo()" disabled></button>
    <button id="playVideoBtn" class="player-submit-btn-pointer" onclick="playVideo()" disabled></button>
</div>

<!-- 第二行：视频播放区域 -->
<div style="margin-top: 10px; max-width: 800px; width: 100%;">
    <video id="videoPlayer" 
           controls 
           style="max-width: 100%; max-height: 100vh; width: 100%;"
           onloadedmetadata="adjustSize()">
        您的浏览器不支持视频播放
    </video>
    <!-- 新增：视频隐藏时显示的时间信息和进度条 -->
    <div id="videoHiddenInfo" style="display: none; width: 87%; max-width: 385px; margin: 0 auto; padding: 10px; border: 1px solid #ccc; background: #f5f5f5;">
        <div id="timeDisplay" style="margin-bottom: 7px; font-size: 16px;">00:00 / 00:00</div>
        <input type="range" id="timeRange" style="width: 100%; max-width: 780px;" min="0" max="100" value="0" oninput="updateVideoTimeByRange(this.value)">
    </div>
</div>

<div class="flexbox-webkit flexbox-webkit-center" style="margin-top: 10px; max-width: 800px; width: 100%; height: 24px;">
    <button class="skipSecondsBtn player-submit-btn-pointer" style="margin-left: 3px; width: 100%; max-width: 100px;" onclick="seekVideo(-30)" disabled></button>
    <button class="skipSecondsBtn player-submit-btn-pointer" style="margin-left: 3px; width: 100%; max-width: 100px;" onclick="seekVideo(-10)" disabled></button>
    <button id="controlPauseBtn" class="player-submit-btn-pointer" style="margin-left: 3px; width: 100%; max-width: 100px;" onclick="togglePause()" disabled></button>
    <button class="skipSecondsBtn player-submit-btn-pointer" style="margin-left: 3px; width: 100%; max-width: 100px;" onclick="seekVideo(10)" disabled></button>
    <button class="skipSecondsBtn player-submit-btn-pointer" style="margin-left: 3px; width: 100%; max-width: 100px;" onclick="seekVideo(30)" disabled></button>
</div>

<!-- 倍速选择区域 -->
<div style="margin-top: 10px; max-width: 800px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>速度: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="0.25" onchange="changeSpeed(this.value)">0.25x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="0.5" onchange="changeSpeed(this.value)">0.5x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="0.75" onchange="changeSpeed(this.value)">0.75x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="1.0" checked onchange="changeSpeed(this.value)">1.0x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="1.25" onchange="changeSpeed(this.value)">1.25x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="1.5" onchange="changeSpeed(this.value)">1.5x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="2.0" onchange="changeSpeed(this.value)">2.0x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="3.0" onchange="changeSpeed(this.value)">3.0x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="4.0" onchange="changeSpeed(this.value)">4.0x</label></div>
    <div style="display: none;"><label><input type="radio" name="speed" value="5.0" onchange="changeSpeed(this.value)">5.0x</label></div>
    <div style="display: none;"><label><input type="radio" name="speed" value="6.0" onchange="changeSpeed(this.value)">6.0x</label></div>
    <div style="display: none;"><label><input type="radio" name="speed" value="8.0" onchange="changeSpeed(this.value)">8.0x</label></div>
    <div style="display: none;"><label><input type="radio" name="speed" value="10.0" onchange="changeSpeed(this.value)">10.0x</label></div>
    <div style="display: none;"><label><input type="radio" name="speed" value="12.0" onchange="changeSpeed(this.value)">12.0x</label></div>
    <div style="display: none;"><label><input type="radio" name="speed" value="14.0" onchange="changeSpeed(this.value)">14.0x</label></div>
    <div style="display: none;"><label><input type="radio" name="speed" value="16.0" onchange="changeSpeed(this.value)">16.0x</label></div>
    <div style="display: none;" id="customSpeedDiv"><label><input type="radio" name="speed" id="customSpeedRadio" value="custom" onchange="handleCustomSpeed()"><span id="customSpeedText">自定义</span></label></div>
    <div style="display: none;" id="editSpeedDiv"><label><input type="radio" name="speed" id="editSpeedRadio" value="edit" onchange="handleEditSpeed()">编辑</label></div>
</div>

<!-- 音量选择区域 -->
<div style="margin-top: 10px; max-width: 800px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>音量: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0" onchange="changeVolume(this.value)">静音</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.1" onchange="changeVolume(this.value)">10%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.2" onchange="changeVolume(this.value)">20%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.3" onchange="changeVolume(this.value)">30%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.4" onchange="changeVolume(this.value)">40%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.5" onchange="changeVolume(this.value)">50%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.6" onchange="changeVolume(this.value)">60%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.7" onchange="changeVolume(this.value)">70%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.8" onchange="changeVolume(this.value)">80%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.9" onchange="changeVolume(this.value)">90%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="1.0" checked onchange="changeVolume(this.value)">100%</label></div>
</div>

<div style="margin-top: 5px; max-width: 800px; width: 100%; flex-wrap: wrap; overflow-x: auto;">

<!-- 循环播放选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>循环播放: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="loop" value="false" checked onchange="changeLoop(this.value)">否</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="loop" value="true" onchange="changeLoop(this.value)">是</label></div>
</div>

<!-- 加载附件选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>加载附件: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="attachment" value="none" checked onchange="changeAttachment(this.value)">无</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="attachment" value="hls" onchange="changeAttachment(this.value)">HLS</label></div>
</div>

<!-- 下载通道选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>下载通道: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="downloadChannel" value="external" checked onchange="changeDownloadChannel(this.value)">外置</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="downloadChannel" value="internal" onchange="changeDownloadChannel(this.value)">内置</label></div>
</div>

<!-- 保留视频链接选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>保留视频链接: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="saveUrl" value="false" checked onchange="changeSaveUrl(this.value)">不允许</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="saveUrl" value="true" onchange="changeSaveUrl(this.value)">允许</label></div>
</div>

<!-- 来源选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>来源: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="source" value="none" onchange="handleSourceChange(this.value)">无</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="source" value="url" checked onchange="handleSourceChange(this.value)">URL</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="source" value="local" onchange="handleSourceChange(this.value)">本地文件</label></div>
    <input type="file" id="fileInput" accept="video/*,audio/*" style="display: none;" onchange="handleFileSelect(this.files)">
</div>

<!-- 按钮显示方式选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>按钮显示为: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="buttonDisplay" value="icon" checked onchange="changeButtonDisplay(this.value)">图标(新)</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="buttonDisplay" value="text" onchange="changeButtonDisplay(this.value)">文字(经典)</label></div>
</div>

<!-- 其他设置 -->
<div style="display: inline-block; margin-top: 5px; max-width: 800px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>其他设置: </b></label></div>
    <div style="display: inline-block;"><label><input type="checkbox" id="displayVideoCheckbox" checked>显示视频</label></div>
    <div style="display: inline-block;"><label><input type="checkbox" id="moreSpeedSelectCheckbox" onchange="toggleMoreSpeedSelect()">显示更多倍速</label></div>
    <div style="display: inline-block;"><label><input type="checkbox" id="autoPlayCheckbox">自动播放</label></div>
</div>

</div>
<script src="js/playVideoScript.js"></script>
</body>
</html>