<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>视频播放器</title>
    <script src="script/playexecute.old.js"></script>
</head>
<body>
<!-- 第一行：输入框和播放按钮 -->
<div style="display: flex;">
    <input type="text" id="videoUrl" placeholder="请输入视频下载链接" style="min-width: 10%; width: 68%; max-width: 800px;" onkeypress="handleKeyPress(event)">
    <input type="button" style="margin-left: 3px;" value="下载" onclick="downloadVideo()">
    <input type="button" style="margin-left: 3px;" value="播放" onclick="playVideo()">
</div>

<!-- 第二行：视频播放区域 -->
<div style="margin-top: 10px; max-width: 800px; width: 100%;">
    <video id="videoPlayer" 
           controls 
           style="max-width: 100%; max-height: 100vh; width: 100%;"
           onloadedmetadata="adjustSize()">
        您的浏览器不支持视频播放
    </video>
</div>

<!-- 倍速选择区域 -->
<div style="margin-top: 10px; max-width: 800px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>速度: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="0.25" onchange="changeSpeed(this.value)">0.25x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="0.5" onchange="changeSpeed(this.value)">0.5x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="0.75" onchange="changeSpeed(this.value)">0.75x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="1.0" checked onchange="changeSpeed(this.value)">1.0x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="1.25" onchange="changeSpeed(this.value)">1.25x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="1.5" onchange="changeSpeed(this.value)">1.5x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="2.0" onchange="changeSpeed(this.value)">2.0x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="3.0" onchange="changeSpeed(this.value)">3.0x</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="speed" value="4.0" onchange="changeSpeed(this.value)">4.0x</label></div>
</div>

<!-- 音量选择区域 -->
<div style="margin-top: 10px; max-width: 800px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>音量: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0" onchange="changeVolume(this.value)">静音</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.1" onchange="changeVolume(this.value)">10%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.2" onchange="changeVolume(this.value)">20%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.3" onchange="changeVolume(this.value)">30%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.4" onchange="changeVolume(this.value)">40%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.5" onchange="changeVolume(this.value)">50%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.6" onchange="changeVolume(this.value)">60%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.7" onchange="changeVolume(this.value)">70%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.8" onchange="changeVolume(this.value)">80%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="0.9" onchange="changeVolume(this.value)">90%</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="volume" value="1.0" checked onchange="changeVolume(this.value)">100%</label></div>
</div>

<div style="margin-top: 5px; max-width: 800px; width: 100%; flex-wrap: wrap; overflow-x: auto;">

<!-- 循环播放选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>循环播放: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="loop" value="false" checked onchange="changeLoop(this.value)">否</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="loop" value="true" onchange="changeLoop(this.value)">是</label></div>
</div>

<!-- 加载附件选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>加载附件: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="attachment" value="none" checked onchange="changeAttachment(this.value)">无</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="attachment" value="hls" onchange="changeAttachment(this.value)">HLS</label></div>
</div>

<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>下载通道: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="downloadChannel" value="external" checked onchange="changeDownloadChannel(this.value)">外置</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="downloadChannel" value="internal" onchange="changeDownloadChannel(this.value)">内置</label></div>
</div>

<!-- 保留视频链接选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>保留视频链接: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="saveUrl" value="false" checked onchange="changeSaveUrl(this.value)">不允许</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="saveUrl" value="true" onchange="changeSaveUrl(this.value)">允许</label></div>
</div>

<!-- 来源选择区域 -->
<div style="display: inline-block; margin-top: 5px; max-width: 300px; width: 100%; flex-wrap: wrap; overflow-x: auto;">
    <div style="display: inline-block;"><label><b>来源: </b></label></div>
    <div style="display: inline-block;"><label><input type="radio" name="source" value="none" onchange="handleSourceChange(this.value)">无</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="source" value="url" checked onchange="handleSourceChange(this.value)">URL</label></div>
    <div style="display: inline-block;"><label><input type="radio" name="source" value="local" onchange="handleSourceChange(this.value)">本地文件</label></div>
    <input type="file" id="fileInput" accept="video/*,audio/*" style="display: none;" onchange="handleFileSelect(this.files)">
</div>

</div>

<script>
// 加载保存的下载通道设置
var savedDownloadChannel = localStorage.getItem('downloadChannel');
if (savedDownloadChannel) {
    var radio = document.querySelector('input[name="downloadChannel"][value="' + savedDownloadChannel + '"]');
    if (radio) radio.checked = true;
}

// 加载保存的音量设置
var savedVolume = localStorage.getItem('videoVolume');
if (savedVolume) {
    var videoPlayer = document.getElementById('videoPlayer');
    videoPlayer.volume = parseFloat(savedVolume);
    var radio = document.querySelector('input[name="volume"][value="' + savedVolume + '"]');
    if (radio) radio.checked = true;
}

// 加载保存的循环播放设置
var savedLoop = localStorage.getItem('videoLoop');
if (savedLoop) {
    var videoPlayer = document.getElementById('videoPlayer');
    videoPlayer.loop = savedLoop === 'true';
    var radio = document.querySelector('input[name="loop"][value="' + savedLoop + '"]');
    if (radio) radio.checked = true;
}

// 加载保存的附件设置
var savedAttachment = localStorage.getItem('videoAttachment');
if (savedAttachment) {
    var radio = document.querySelector('input[name="attachment"][value="' + savedAttachment + '"]');
    if (radio) radio.checked = true;
    if (savedAttachment === 'hls') {
        changeAttachment('hls');
    }
}

// 加载保存的链接设置和视频链接
var savedSaveUrl = localStorage.getItem('saveVideoUrl');
if (savedSaveUrl) {
    var radio = document.querySelector('input[name="saveUrl"][value="' + savedSaveUrl + '"]');
    if (radio) radio.checked = true;
}

// 设置电脑端最大宽度
if (document.body && document.body.style) {
    document.body.style.maxWidth = '800px';
}
</script>
</body>
</html>